<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Welcome To HelsingenMersken</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Welcome To HelsingenMersken">
<meta property="og:url" content="http://laevatein.tech/index.html">
<meta property="og:site_name" content="Welcome To HelsingenMersken">
<meta property="og:locale">
<meta property="article:author" content="HelsingenMersken">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Welcome To HelsingenMersken" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Welcome To HelsingenMersken</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://laevatein.tech"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-告别VM虚拟机，使用WSL安装交叉编译器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/13/%E5%91%8A%E5%88%ABVM%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E4%BD%BF%E7%94%A8WSL%E5%AE%89%E8%A3%85%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2021-10-13T00:44:01.000Z" itemprop="datePublished">2021-10-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/13/%E5%91%8A%E5%88%ABVM%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E4%BD%BF%E7%94%A8WSL%E5%AE%89%E8%A3%85%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%99%A8/">告别VM虚拟机，使用WSL安装交叉编译器</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>学习嵌入式Linux的首先是开发环境安装，在Linux平台上使用交叉编译器编译，但是VM虚拟机体积大，使用起来用户体验很不好，尤其是电脑内存捉急的。有没有可以替代的方法呢？答案是可以使用WSL<br>什么是WSL？适用于 Linux 的 Windows 子系统可让开发人员按原样运行 GNU/Linux 环境 - 包括大多数命令行工具、实用工具和应用程序 - 且不会产生传统虚拟机或双启动设置开销。</p>
<h1 id="WSL1和WSL2区别"><a href="#WSL1和WSL2区别" class="headerlink" title="WSL1和WSL2区别"></a>WSL1和WSL2区别</h1><p>首先从官方的比较中可以看出除了跨操作系统文件系统的性能外，WSL 2 体系结构在多个方面都比 WSL 1 更具优势。但是假如需要使用的串口或者跨操作系统文件系统的话只能选择WSL1，笔者在这里只用到了wsl进行行编译，其他操作全部windows下解决，所以选择WSL2<br><img src="http://qiniu.laevatein.tech/202110130851702.png"></p>
<h1 id="安装WSL"><a href="#安装WSL" class="headerlink" title="安装WSL"></a>安装WSL</h1><h2 id="首先需要在电脑BIOS中打开VT"><a href="#首先需要在电脑BIOS中打开VT" class="headerlink" title="首先需要在电脑BIOS中打开VT"></a>首先需要在电脑BIOS中打开VT</h2><p>具体步骤请按电脑品牌百度</p>
<h2 id="自动安装步骤"><a href="#自动安装步骤" class="headerlink" title="自动安装步骤"></a>自动安装步骤</h2><p>powershell输入以下命令(WIN+X)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --install</span><br></pre></td></tr></table></figure>
<p>此命令将下载最新的 Linux 内核，将 WSL 2 设置为默认值，并安装 Linux 发行版。步骤简单但是默认安装在C盘，虽然只有几百兆，但某些小伙伴可能有精神洁癖（逃），咱们选手动安装</p>
<h1 id="WSL手动安装步骤"><a href="#WSL手动安装步骤" class="headerlink" title="WSL手动安装步骤"></a>WSL手动安装步骤</h1><h2 id="启用适用于-Linux-的-Windows-子系统"><a href="#启用适用于-Linux-的-Windows-子系统" class="headerlink" title="启用适用于 Linux 的 Windows 子系统"></a>启用适用于 Linux 的 Windows 子系统</h2><p>以管理员身份打开 PowerShell 并运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</span><br></pre></td></tr></table></figure>
<p>重启</p>
<h2 id="启用虚拟机功能"><a href="#启用虚拟机功能" class="headerlink" title="启用虚拟机功能"></a>启用虚拟机功能</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</span><br></pre></td></tr></table></figure>
<h2 id="下载-Linux-内核更新包"><a href="#下载-Linux-内核更新包" class="headerlink" title="下载 Linux 内核更新包"></a>下载 Linux 内核更新包</h2><p><a target="_blank" rel="noopener" href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">适用于 x64 计算机的 WSL2 Linux 内核更新包</a><br>下完后打开一路下一步</p>
<h2 id="将-WSL-2-设置为默认版本"><a href="#将-WSL-2-设置为默认版本" class="headerlink" title="将 WSL 2 设置为默认版本"></a>将 WSL 2 设置为默认版本</h2><p>以管理员身份打开 PowerShell 并运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --set-default-version 2</span><br></pre></td></tr></table></figure>
<h2 id="安装所选的-Linux-分发"><a href="#安装所选的-Linux-分发" class="headerlink" title="安装所选的 Linux 分发"></a>安装所选的 Linux 分发</h2><p>方法一：Microsoft Store商店中搜索需要的Linux版本直接安装，缺点是默认装C盘<br>方法二：手动装，首先下载</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wslubuntu2004">Ubuntu 20.04</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wslubuntu2004arm">Ubuntu 20.04 ARM</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wsl-ubuntu-1804">Ubuntu 18.04</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wsl-ubuntu-1804-arm">Ubuntu 18.04 ARM</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wsl-ubuntu-1604">Ubuntu 16.04</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wsl-debian-gnulinux">Debian GNU/Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wsl-kali-linux-new">Kali Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wsl-sles-12">SUSE Linux Enterprise Server 12</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wsl-SUSELinuxEnterpriseServer15SP2">SUSE Linux Enterprise Server 15 SP2</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/wsl-opensuseleap15-2">openSUSE Leap 15.2</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/WhitewaterFoundry/WSLFedoraRemix/releases/">Fedora Remix for WSL</a><br>下载好后解压.appx格式的包，假设安装在D盘，则直接将其复制到D盘即可，双击文件夹中的exe文件启动linux，首次使用需要设置账户密码。<br><strong>注意：如果需要使用模拟器时需要在“启用或关闭Windows功能”中关闭Linux子系统功能，否则模拟器无法检测到VT</strong><br><img src="http://qiniu.laevatein.tech/202110130922056.png"></li>
</ul>
<h1 id="交叉编译器安装"><a href="#交叉编译器安装" class="headerlink" title="交叉编译器安装"></a>交叉编译器安装</h1><p>首先时需要下载安装包了，这里从韦东山jz2440资料光盘中拷贝出<br>首先将其复制到Linux用户目录下,<strong>此处路径以笔者为例，请按需修改</strong><br>文件管理器打开下面的位置即为Linux目录，注意版本号按需修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\wsl$\Ubuntu-20.04</span><br></pre></td></tr></table></figure>
<p>打开Linux的命令行，首先新建目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir \usr\local\arm</span><br></pre></td></tr></table></figure>
<p>将安装包复制到arm文件夹中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp arm-linux-gcc-4.3.2.tar.bz2 \usr\local\arm -f</span><br></pre></td></tr></table></figure>
<p>解压</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo  tar -xjvf arm-linux-gcc-4.3.2.tar.bz2</span><br></pre></td></tr></table></figure>
<p>设置环境变量<br>笔者习惯使用nano编辑器，自行选择编辑器操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano \etc\profile</span><br></pre></td></tr></table></figure>
<p>在最后添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/usr/local/arm/arm-linux-gcc-4.3.2/bin</span><br></pre></td></tr></table></figure>
<p>Ctrl+O并回车保存，Ctrl+X退出<br>重启<br>注意WSL中不能直接重启，只能关闭再打开<br>以管理员身份打开 PowerShell 并运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --shutdown</span><br></pre></td></tr></table></figure>
<p>然后再重新打开<br>输入arm-linux-gcc -v能够正常显示版本则表示安装成功</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2021/10/13/%E5%91%8A%E5%88%ABVM%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E4%BD%BF%E7%94%A8WSL%E5%AE%89%E8%A3%85%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%99%A8/" data-id="ckusjj4sv000x24t99ffahotj" data-title="告别VM虚拟机，使用WSL安装交叉编译器" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Makefile" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/30/Makefile/" class="article-date">
  <time class="dt-published" datetime="2021-09-30T10:21:15.000Z" itemprop="datePublished">2021-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/30/Makefile/">Makefile</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">目标...:依赖...</span><br><span class="line">    命令</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p><strong>注意为Tab，不得出现空格</strong></p>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><h2 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h2><p>$(变量名)</p>
<h2 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h2><ul>
<li>= 延迟变量(不调用不改变)</li>
<li>:= 立即赋值</li>
<li>?= 空赋值</li>
<li>+= 追加赋值<h2 id="自动化变量"><a href="#自动化变量" class="headerlink" title="自动化变量"></a>自动化变量</h2></li>
<li>$&lt; 第一个依赖文件</li>
<li>$^ 全部的依赖文件，若目标中有重复文件将只保留一份</li>
<li>$@ 目标的集合</li>
<li>$% 当目标为函数库的时候表示规则中的目标成员名。若目标不是函数库文件则值为空</li>
<li>$? 所有比目标新的依赖目标集合，以空格隔开</li>
<li>$* 表示目标模式中”%”及其以前的部分</li>
<li>$+ $^类似但不主动除去<h1 id="伪目标"><a href="#伪目标" class="headerlink" title="伪目标"></a>伪目标</h1>仅执行命令的目标与目录下存在的文件名冲突时，例如clean<br>声明方式：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.PHONY:clean</span><br></pre></td></tr></table></figure>
<h1 id="模式规则"><a href="#模式规则" class="headerlink" title="模式规则"></a>模式规则</h1>% 长度任意的非空字符串，当”%”出现在目标时，目标中的”%”决定依赖中的”%”值<h1 id="条件分支"><a href="#条件分支" class="headerlink" title="条件分支"></a>条件分支</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ifeq (var1,var2)</span><br><span class="line">...</span><br><span class="line">else</span><br><span class="line">...</span><br><span class="line">endif</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ifneq (var1,var2)</span><br><span class="line">...</span><br><span class="line">else</span><br><span class="line">...</span><br><span class="line">endif</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="模式替换函数patsubst"><a href="#模式替换函数patsubst" class="headerlink" title="模式替换函数patsubst"></a>模式替换函数patsubst</h2>$(patsubst %.c,%.o,x.c.c bar.c) 将“x.c.c bar.c”中以“.c”结尾的单词替换成“.o”<h2 id="取文件名函数notdir"><a href="#取文件名函数notdir" class="headerlink" title="取文件名函数notdir"></a>取文件名函数notdir</h2>$(notdir src/foo.c hacks)取出路径中非目录的部分<h2 id="wildcard-获取匹配模式文件名函数"><a href="#wildcard-获取匹配模式文件名函数" class="headerlink" title="wildcard 获取匹配模式文件名函数"></a>wildcard 获取匹配模式文件名函数</h2>$(wildcard *.c)返回当前目录下所有“.c”源文件列表<h2 id="foreach循环函数"><a href="#foreach循环函数" class="headerlink" title="foreach循环函数"></a>foreach循环函数</h2>$(foreach VAR,LIST,TEXT)LIST中以空格间隔的单词逐个赋值给VAR进行TEXT中的运算<div style="display:none">
# 头文件依赖
# 文件描述符和打开模式
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int fd;</span><br><span class="line">fd = open(filename,flags,mode);</span><br><span class="line">lseek(fd,offset,whence);</span><br><span class="line">write(fd,buf,write_len);</span><br><span class="line">read(fd,buf,read_len);</span><br><span class="line">close(fd);</span><br></pre></td></tr></table></figure>
## 文件描述符
特殊的索引</li>
</ul>
<h2 id="文件打开模式"><a href="#文件打开模式" class="headerlink" title="文件打开模式"></a>文件打开模式</h2><p>主模式</p>
<ul>
<li>O_RDONLY:只读模式</li>
<li>O_WRONLY:只写模式</li>
<li>O_RDWR:读写模式<br>副模式</li>
<li>O_CREATE:文件不存在时创建文件</li>
<li>O_APPEND:追加模式</li>
<li>O_DIRECT:直接IO模式</li>
<li>O_SYNC:同步模式</li>
<li>O_NOBLOCK:非阻塞模式<h1 id="系统IO编程"><a href="#系统IO编程" class="headerlink" title="系统IO编程"></a>系统IO编程</h1></li>
<li>open</li>
<li>write</li>
<li>read</li>
<li>lseek</li>
<li>close<h1 id="标准IO编程"><a href="#标准IO编程" class="headerlink" title="标准IO编程"></a>标准IO编程</h1></div></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2021/09/30/Makefile/" data-id="ckusjj4sd000324t96uhm3wxj" data-title="Makefile" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-树莓派下岗再就业-ZeroTier内网穿透" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/22/%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8B%E5%B2%97%E5%86%8D%E5%B0%B1%E4%B8%9A-ZeroTier%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" class="article-date">
  <time class="dt-published" datetime="2021-09-22T12:00:00.000Z" itemprop="datePublished">2021-09-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/raspberry/">raspberry</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/22/%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8B%E5%B2%97%E5%86%8D%E5%B0%B1%E4%B8%9A-ZeroTier%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">树莓派下岗再就业-ZeroTier内网穿透</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><span style="border-bottom:2px dashed red;">需要截图的部分等新图床弄好后再补</span><br>离校后进不了校园内网，但是万一需要的时候就很麻烦，于是我看向了边上的树莓派</p>
<h1 id="zerotier安装"><a href="#zerotier安装" class="headerlink" title="zerotier安装"></a>zerotier安装</h1><h2 id="注册账号"><a href="#注册账号" class="headerlink" title="注册账号"></a>注册账号</h2><p><a target="_blank" rel="noopener" href="https://www.zerotier.com/">https://www.zerotier.com/</a><br>接着新建网络，类型选择PRIVATE</p>
<h2 id="客户端安装"><a href="#客户端安装" class="headerlink" title="客户端安装"></a>客户端安装</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>下载安装客户端，并右击添加网络，将上一步获得的16位Network ID填入<strong>注意复制的时候不要带换行或空格符号</strong></p>
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://install.zerotier.com | sudo bash</span><br></pre></td></tr></table></figure>
<p>加入网络</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zerotier-cli join Network ID</span><br></pre></td></tr></table></figure>
<h1 id="配置树莓派的数据转发和路由控制"><a href="#配置树莓派的数据转发和路由控制" class="headerlink" title="配置树莓派的数据转发和路由控制"></a>配置树莓派的数据转发和路由控制</h1><h2 id="查看IP转发设置"><a href="#查看IP转发设置" class="headerlink" title="查看IP转发设置"></a>查看IP转发设置</h2><p>0为关闭</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sysctl net.ipv4.ip_forward</span><br><span class="line">net.ipv4.ip_forward = 0</span><br></pre></td></tr></table></figure>
<h2 id="打开内核IP转发"><a href="#打开内核IP转发" class="headerlink" title="打开内核IP转发"></a>打开内核IP转发</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/sysctl.conf</span><br></pre></td></tr></table></figure>
<p>将下列语句去掉注释并修改为1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.ip_forward=1  </span><br></pre></td></tr></table></figure>
<p>修改完成后CTRL+O并回车保存，CTRL+X退出<br>接下来激活配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure>
<p>再次查看IP转发状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl net.ipv4.ip_forward</span><br></pre></td></tr></table></figure>
<h2 id="查看网卡状态"><a href="#查看网卡状态" class="headerlink" title="查看网卡状态"></a>查看网卡状态</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ifconfig</span><br></pre></td></tr></table></figure>
<p>可以看到eth0为真实网卡，而————————为zerotire虚拟出来的网口</p>
<h2 id="使用-iptables-启用-eth0-的网络地址转换和-IP-伪装"><a href="#使用-iptables-启用-eth0-的网络地址转换和-IP-伪装" class="headerlink" title="使用 iptables 启用 eth0 的网络地址转换和 IP 伪装"></a>使用 iptables 启用 eth0 的网络地址转换和 IP 伪装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span><br></pre></td></tr></table></figure>
<p>允许流量转发和跟踪活动连接：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>接下来设置从zt7u3fcxwr 到 eth0 流量转发</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -A FORWARD -i zt7u3fcxwr -o eth0 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>经过以上设置就完成了配置，但是iptables 规则在重新启动后就无效了，需要保存在配置文件中</p>
<h2 id="安装-iptables-配置存储工具"><a href="#安装-iptables-配置存储工具" class="headerlink" title="安装 iptables 配置存储工具"></a>安装 iptables 配置存储工具</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install iptables-persistent</span><br></pre></td></tr></table></figure>
<p>保存 iptables 配置到文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo netfilter-persistent save</span><br></pre></td></tr></table></figure>
<p>查看 iptables 配置文件内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables-save </span><br></pre></td></tr></table></figure>
<h1 id="路由设置"><a href="#路由设置" class="headerlink" title="路由设置"></a>路由设置</h1><h2 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h2><p>进入zerotier控制台，将下来到设备可以看到第一步加入的设备，勾选Auth?</p>
<h2 id="设置路由"><a href="#设置路由" class="headerlink" title="设置路由"></a>设置路由</h2><p>Managed Routes项中添加0.0.0.0/0（全局转发，可根据需求设置）</p>
<h2 id="客户端设置"><a href="#客户端设置" class="headerlink" title="客户端设置"></a>客户端设置</h2><h3 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h3><p>Allow Default Route勾选转发<br><strong>不用的时候一定记得取消勾选，否则客户端退出后无法正常使用网络</strong></p>
<h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><p>在设置中勾选转发</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/RadiantJeral/article/details/107913539" title="【网络通信】【zeorTier】基于 zerotier 使用 Linux Kernel 设置转发代理">【网络通信】【zeorTier】基于 zerotier 使用 Linux Kernel 设置转发代理</a><br><a target="_blank" rel="noopener" href="https://docs.zerotier.com/" title="ZeroTier Documentation">ZeroTier Documentation</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2021/09/22/%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8B%E5%B2%97%E5%86%8D%E5%B0%B1%E4%B8%9A-ZeroTier%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" data-id="ckusjj4sw000z24t9fnvf7ice" data-title="树莓派下岗再就业-ZeroTier内网穿透" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-rts、dtr与一键下载电路" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/21/rts%E3%80%81dtr%E4%B8%8E%E4%B8%80%E9%94%AE%E4%B8%8B%E8%BD%BD%E7%94%B5%E8%B7%AF/" class="article-date">
  <time class="dt-published" datetime="2021-01-21T13:27:14.000Z" itemprop="datePublished">2021-01-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/New-World/">New World</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/21/rts%E3%80%81dtr%E4%B8%8E%E4%B8%80%E9%94%AE%E4%B8%8B%E8%BD%BD%E7%94%B5%E8%B7%AF/">RTS、DTR与一键下载电路</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>单片机在通过ISP下载程序的时候一般我们只关注四根线，VCC、GND、RXD、TXD。最近在画一个ESP32的最小系统时发现很多开发板的USB-&gt;TTL电路却使用到了串口芯片的RTS、DTR管脚。</p>
<p><img src="http://qiniu.laevatein.tech/202110152320197.png"></p>
<p>似乎有那么一丢丢眼熟，没错，原子的一键下载电路也长这个样</p>
<p><img src="http://qiniu.laevatein.tech/202110152320127.png"></p>
<p>战舰V3一键下载电路</p>
<p>通过串口的RTS# DTR#管脚控制MCU的RST和BOOT0实现一键下载。上位机控制DTR#输出高电平，RTS#输出低电平，三极管均导通，通过三极管的反向作用，4148导通，RESET被拉低，系统复位，而BOOT0被拉高。一定延时后再将DTR#输出低电平，系统启动，此时因为BOOT0拉高所以程序进入ISP模式。需要注意的是这两个管脚与FlyMcu上设置的电平完全相反。</p>
<p>再回到51单片机，下载程序的软件无非两个，STC-ISP和普中的下载软件。STC-ISP下载异常的稳定，但是每次都需要冷启动。而普中的却不需要，翻阅下普中开发板设计</p>
<p><img src="http://qiniu.laevatein.tech/202110152320016.png"></p>
<p>普中HC6800下载电路</p>
<p>这两个管脚控制Q1，再通过Q1控制MOS管导通与否实现对板子电源的控制。emmm，，，问题出在这个MOS管经常炸管，，，</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2021/01/21/rts%E3%80%81dtr%E4%B8%8E%E4%B8%80%E9%94%AE%E4%B8%8B%E8%BD%BD%E7%94%B5%E8%B7%AF/" data-id="ckusjj4sp000j24t9cvhbg5b9" data-title="RTS、DTR与一键下载电路" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-给树莓派添加物理开关机按键" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/21/%E7%BB%99%E6%A0%91%E8%8E%93%E6%B4%BE%E6%B7%BB%E5%8A%A0%E7%89%A9%E7%90%86%E5%BC%80%E5%85%B3%E6%9C%BA%E6%8C%89%E9%94%AE/" class="article-date">
  <time class="dt-published" datetime="2021-01-21T11:24:57.000Z" itemprop="datePublished">2021-01-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/New-World/">New World</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/21/%E7%BB%99%E6%A0%91%E8%8E%93%E6%B4%BE%E6%B7%BB%E5%8A%A0%E7%89%A9%E7%90%86%E5%BC%80%E5%85%B3%E6%9C%BA%E6%8C%89%E9%94%AE/">给树莓派添加物理开关机按键</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>之前通过树莓派把打印机改成了共享打印机，但每次开关机就显得无比麻烦，直接断电鬼知道下次开机系统是不是正常运行的，每次关机都接个键盘实在太不优雅了</p>
<p>想法一：单片机模拟USB键盘发送关机指令，费时费力，直接pass</p>
<p>想法二：板子上有没有啥预留的电源控制接口，实际上拆开可以看到个RUN，用于控制重启，中文资料约等于0，抄来抄去都是那一篇，但是在检索的过程中发现了这个</p>
<p><img src="http://qiniu.laevatein.tech/202110152331336.png"></p>
<p>有前辈已经整出来了</p>
<p>在/boot/config.txt添加以下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 使用GPIO3（这里的GPIO指3BCM GPIO编号，也就是SCL1）作为电源键，下降沿为按下，上升沿为弹起，内部上拉</span><br><span class="line">dtoverlay=gpio-shutdown</span><br></pre></td></tr></table></figure>

<p>保存关机后，试下将IO3和GND短接下，没错，直接开机，开机后再短接下，关机，完美！</p>
<p>在外壳上加个按键，建议把杜邦线拆了加焊一下再插上<br><img src="http://qiniu.laevatein.tech/202110152334225.jpg"><br>参考</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013062709/article/details/100058536">给树莓派添加开关机键</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2021/01/21/%E7%BB%99%E6%A0%91%E8%8E%93%E6%B4%BE%E6%B7%BB%E5%8A%A0%E7%89%A9%E7%90%86%E5%BC%80%E5%85%B3%E6%9C%BA%E6%8C%89%E9%94%AE/" data-id="ckusjj4t3001824t9b7nlccr0" data-title="给树莓派添加物理开关机按键" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-raspberry-pi-3bcups实现共享打印机" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/21/raspberry-pi-3bcups%E5%AE%9E%E7%8E%B0%E5%85%B1%E4%BA%AB%E6%89%93%E5%8D%B0%E6%9C%BA/" class="article-date">
  <time class="dt-published" datetime="2020-12-21T13:27:42.000Z" itemprop="datePublished">2020-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/raspberry/">raspberry</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/21/raspberry-pi-3bcups%E5%AE%9E%E7%8E%B0%E5%85%B1%E4%BA%AB%E6%89%93%E5%8D%B0%E6%9C%BA/">Raspberry PI 3B+CUPS实现共享打印机</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>每次打印东西都要把电脑搬到打印机边上，实在过于麻烦，恰巧手里有块吃灰大半年的树莓派，干脆直接改无线打印机算了</p>
<p>把打印机通过USB线连接Raspberry PI，然后安装CUPS（一定要换国内源，具体参考开箱配置那一篇）</p>
<p>sudo apt-get install cups</p>
<p>系统会自动安装相关依赖和打印机驱动，安装完后将用户加到lpadmin 用户组，然后开启 CUPS 的远程访问权限。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G lpadmin pi</span><br><span class="line">sudo cupsctl --remote-any</span><br></pre></td></tr></table></figure>

<p>执行完之后局域网内任何一个设备访问Raspberry PI的631端口，如<a href="http://192.168.1.XX:631，接了屏幕的建议直接在Raspberry">http://192.168.1.XX:631，接了屏幕的建议直接在Raspberry</a> PI上访问</p>
<p>按CUPS界面引导配置CUPS：Administration-&gt;Add Printer,记得选中分享打印机，打印机的名字尽量简单（吐槽句，有个教程写成Description ，然后一堆复读机复读了这个错误，，，，），后面可能会用到，配置完后打印测试页试下能不能正常打印</p>
<p>安装samba来添加Windows环境支持（实际测试Windows下能不能找到完全看缘分，但是Android下可以找到）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install samba</span><br></pre></td></tr></table></figure>

<p>接下来到Windows系统里添加打印机，安装samba后运气好能直接找到，但是大概率是没办法直接找到的，选择我需要的打印机不在列表中</p>
<p><img src="http://qiniu.laevatein.tech/202110152319965.png"></p>
<p>然后按下图设置（打印机IP:631/printers/Name），注意IP地址和在CUPS中设置的打印机名不要设置错，之后一路下一步，正确选择打印机驱动即可。</p>
<p><img src="http://qiniu.laevatein.tech/202110152319413.png"></p>
<p>Android中本人测试为Redmi K20，无法打印图片，但是可以通过先转PDF的方式打印（办法总比困难多嘛</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://sspai.com/post/40997">如何正确地用树莓派共享打印机</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2020/12/21/raspberry-pi-3bcups%E5%AE%9E%E7%8E%B0%E5%85%B1%E4%BA%AB%E6%89%93%E5%8D%B0%E6%9C%BA/" data-id="ckusjj4sp000l24t9065t70r3" data-title="Raspberry PI 3B+CUPS实现共享打印机" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-浏览器抓取cookies" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8A%93%E5%8F%96cookies/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T12:34:34.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/New-World/">New World</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8A%93%E5%8F%96cookies/">浏览器抓取cookies</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>最近为了白嫖室友的某些网站会员（<del>白嫖使人进步</del>），首先某些网站登陆后下次再访问发现已经自动登陆了，这里面利用到了cookie进行标识用户，Cookie是一段不超过4KB的多个键值对组成，只要将有效的cookie抓取到就可以实现免密登陆。<br>那么如何以最简单的方法获取cookies？</p>
<p>打开页面，按下f12</p>
<p><img src="http://qiniu.laevatein.tech/202110152334086.png"></p>
<p>依次Network-&gt;过滤器（漏斗图标）-&gt;Doc,再刷新</p>
<p><img src="http://qiniu.laevatein.tech/202110152334628.png"></p>
<p>以某易云为例，选择music.163.com,在Headers中向下寻找cookies即可</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2020/12/04/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8A%93%E5%8F%96cookies/" data-id="ckusjj4t2001624t9e08xdfg8" data-title="浏览器抓取cookies" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cc2530开发环境搭建" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/21/cc2530%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="article-date">
  <time class="dt-published" datetime="2020-11-21T09:26:08.000Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%85%B6%E5%AE%83%E5%8D%95%E7%89%87%E6%9C%BA/">其它单片机</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/21/cc2530%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">CC2530开发环境搭建</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="CC2530是个什么玩意？"><a href="#CC2530是个什么玩意？" class="headerlink" title="CC2530是个什么玩意？"></a>CC2530是个什么玩意？</h2><p>简单的说是256kB 闪存和 8kB RAM 的 Zigbee 和 IEEE 802.15.4 无线8051增强型MCU，能zigbee组网。</p>
<h2 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h2><p>软件：IAR for 8051，SmartRF Flash Programmer（德州仪器官网有两个版本，注意选择老版本）</p>
<p>硬件：cc2530核心板（抢的），SmartRF04EB仿真器（捡的），万用板、led等元件（嫖的） P.S.开局一双手，东西全靠抢（逃</p>
<h2 id="最小系统结构"><a href="#最小系统结构" class="headerlink" title="最小系统结构"></a>最小系统结构</h2><p><img src="http://qiniu.laevatein.tech/202110152242713.jpeg" alt="核心板引出io"></p>
<p><img src="http://qiniu.laevatein.tech/202110152242437.jpeg" alt="SmartRF04EB接口"></p>
<p>GND—GND</p>
<p>VCC—VCC</p>
<p>DC—-P22</p>
<p>DO—-P21</p>
<p>CSN—P14</p>
<p>SCLK–P15</p>
<p>RESET–RES</p>
<p>MOSI–P16</p>
<p>NC</p>
<p>MISO–P17</p>
<p>连接接线说明</p>
<p>P.S.友情提示，一定要注意接线是否靠谱，杜邦线坑人</p>
<h2 id="IAR开发环境设置"><a href="#IAR开发环境设置" class="headerlink" title="IAR开发环境设置"></a>IAR开发环境设置</h2><p>打开IAR-&gt;创建workspace</p>
<p><img src="http://qiniu.laevatein.tech/202110152243460.jpeg"></p>
<p>创建工程，之后选择工程存储路径。</p>
<p><img src="http://qiniu.laevatein.tech/202110152243934.jpeg"></p>
<p><img src="http://qiniu.laevatein.tech/202110152243929.jpeg"></p>
<p>Ctrl+N新建文件，Ctrl+S保存文件（注意文件拓展名.c）右击工程添加文件</p>
<p><img src="http://qiniu.laevatein.tech/202110152244496.jpeg"></p>
<p><img src="http://qiniu.laevatein.tech/202110152244248.jpeg"></p>
<p>还需要设置项目属性，点击project-&gt;Options</p>
<p><img src="http://qiniu.laevatein.tech/202110152244970.png"></p>
<p><img src="http://qiniu.laevatein.tech/202110152244310.jpeg"></p>
<p><img src="http://qiniu.laevatein.tech/202110152245079.jpeg"></p>
<p><img src="http://qiniu.laevatein.tech/202110152245400.jpeg"></p>
<p>注意输出文件后缀改为hex</p>
<p><img src="http://qiniu.laevatein.tech/202110152245457.jpeg"></p>
<p>编辑程序后编译（快捷键F7），也可以ctrl+D直接进入仿真（需要仿真器）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//示例</span><br><span class="line">#include &quot;iocc2530.h&quot;</span><br><span class="line">#define led P1_0</span><br><span class="line">void main(void)</span><br><span class="line">&#123;</span><br><span class="line">  P1SEL &amp;= ~0xC0;</span><br><span class="line">  P1DIR = 0xC0;</span><br><span class="line">  while(1)&#123;</span><br><span class="line">    led=0;</span><br><span class="line">    led=1; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://qiniu.laevatein.tech/202110152246568.jpeg"></p>
<h2 id="GPIO配置"><a href="#GPIO配置" class="headerlink" title="GPIO配置"></a>GPIO配置</h2><p>CC2530共有21个IO，核心板给出了19个（P2_4和P2_3用于接32.768K的晶振），其中P22、P21用于下程序，不建议使用。</p>
<p><img src="http://qiniu.laevatein.tech/202110152246670.jpeg"></p>
<p>在CC2530的21个IO口中，除了P1_0和P1_1两个IO口具有20mA的驱动能力之外，其余IO口的驱动能力仅为4mA。官方例程这两个IO用于点灯，至于自己焊电路麻，无所谓了（摊手</p>
<p>寄存器PxSEL,其中x为端口标号（0-2），用来设置端口的每个引脚为通用IO或外部设备IO，默认时，每当复位后，所有数字输入输出引脚都设置为通用输入引脚。0:通用IO 1:外设功能</p>
<p>寄存器PxINP用于设置每个端口引脚为输入或输出。0:输入 1:输出</p>
<p>寄存器PxINP用来在通用IO端口用作输入时设置为上拉/下拉或三态操作模式，默认复位后所有端口设置为带上拉的输入P10、P11即使外设功能是输入，也没有上拉/下拉功能。0:上拉/下拉 1:三态</p>
<h2 id="驱动安装与程序下载"><a href="#驱动安装与程序下载" class="headerlink" title="驱动安装与程序下载"></a>驱动安装与程序下载</h2><p>插上仿真器，电脑应识别出但无法正常驱动，打开设备管理器，右击仿真器，选择更新驱动程序</p>
<p><img src="http://qiniu.laevatein.tech/202110152246504.jpeg"></p>
<p>选择“浏览我的计算机以查找驱动程序软件”，路径选择为IAR安装目录下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\IAR SYSTEMS\EMBEDDED WORKBENCH 8.1\8051\DRIVERS\TEXAS INSTRUMENTS\WIN_64BIT_X64</span><br></pre></td></tr></table></figure>

<p>选择下一步后关闭窗口，复位仿真器，刷新设备管理器，此时仿真器应被正确识别</p>
<p>打开SmartRF Flash Programmer并按下图设置</p>
<p><img src="http://qiniu.laevatein.tech/202110152246050.jpeg"></p>
<p>1.注意芯片是否识别正确，未识别按下仿真器复位键，如果还不行请检查接线。</p>
<p>2.选择对应hex文件。</p>
<p>3.点击perform actions下载，等待进度条完成。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xixixing/p/10265626.html">编程工具IAR、烧写工具SmartRF的使用</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2020/11/21/cc2530%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" data-id="ckusjj4sf000524t9e9yobwzb" data-title="CC2530开发环境搭建" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2020ti杯省级大学生电子设计竞赛反思、总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/09/2020ti%E6%9D%AF%E7%9C%81%E7%BA%A7%E5%A4%A7%E5%AD%A6%E7%94%9F%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B%E5%8F%8D%E6%80%9D%E3%80%81%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2020-11-09T09:35:44.000Z" itemprop="datePublished">2020-11-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/New-World/">New World</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/09/2020ti%E6%9D%AF%E7%9C%81%E7%BA%A7%E5%A4%A7%E5%AD%A6%E7%94%9F%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B%E5%8F%8D%E6%80%9D%E3%80%81%E6%80%BB%E7%BB%93/">2020\&#34;TI\&#34;杯省级大学生电子设计竞赛反思、总结</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>尽职尽责地完成任务，同时保持身心健康，不被过度加班折磨心智，也不因碌碌无为而愤世嫉俗</p>
</blockquote>
<p>这次比赛不论获奖如何对我来说都是血亏，开学后先是准备期末考试，之后是准备电赛，直到九号特么终于放了一天假。结果晚上组委会提前放题目，长期的高压、失眠差点猝死，十一号早上吐胆汁，心率不齐过了半个月才恢复….以身体为代价换取的任何东西都是彻底的赔本买卖</p>
<p><img src="http://qiniu.laevatein.tech/202110152240161.png"></p>
<p>本组选择赌A题——无线运动传感器节点设计，首先吐槽的是题目说明不清，题目要求将节点数据上传至服务器，想都没想直接上阿里云，第一天下午程序移植完成，结果组委会来一句不得连接外网，&amp;*%#W*@!&amp; 一天白干了</p>
<p><img src="http://qiniu.laevatein.tech/202110152241798.png"></p>
<p>全题最蛋疼的就是这个心率波形显示了，使用心率发生器输出波形非常稳定，但是电极片贴到人身上就是另一码事了。电极粘贴情况、皮肤干燥情况、粘贴位置等均影响AD采集数值，Vpp能从50000直接蹦到400000不等。直到最后这个问题都没解决，另外，电极片长时间粘贴对人有害，而且难以撕下，胸口汗毛全被这玩意撕下来了。</p>
<p>在比赛过程中，为了解决所出现的问题，想尽一切方法解决，为了解决屏幕刷新跟不上数据采集问题，使用了消息队列，最后发现还是得切片才能显示，，，不过至少说明数据结构没白学。</p>
<h2 id="不足："><a href="#不足：" class="headerlink" title="不足："></a>不足：</h2><p>首先是队友配合问题，由于磨合时间短，缺乏经验等原因导致磨合不足，配合效率低下，作为队长我有不可推卸的责任。</p>
<p>其次，上位机一直作为本人短板，比赛中不仅没解决，还耗费了大量时间，不管是第一天的阿里云还是最后一个晚上死磕pyqt，耗费大量精力。由于上位机短板最后评测时只能三选一得分（三个功能分开实现，只能算一个5/15）</p>
<p>长期高压+熬夜，最后熬的心率不齐，本来板上订钉的心率检测最后也没测出来</p>
<p>不要耍小聪明，你能想到的造假手段别人也能想到</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2020/11/09/2020ti%E6%9D%AF%E7%9C%81%E7%BA%A7%E5%A4%A7%E5%AD%A6%E7%94%9F%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B%E5%8F%8D%E6%80%9D%E3%80%81%E6%80%BB%E7%BB%93/" data-id="ckusjj4s9000124t96d77bo9b" data-title="2020\&#34;TI\&#34;杯省级大学生电子设计竞赛反思、总结" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-c语言位移、不同长度赋值操作" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/04/c%E8%AF%AD%E8%A8%80%E4%BD%8D%E7%A7%BB%E3%80%81%E4%B8%8D%E5%90%8C%E9%95%BF%E5%BA%A6%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C/" class="article-date">
  <time class="dt-published" datetime="2020-10-03T16:34:51.000Z" itemprop="datePublished">2020-10-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/New-World/">New World</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/04/c%E8%AF%AD%E8%A8%80%E4%BD%8D%E7%A7%BB%E3%80%81%E4%B8%8D%E5%90%8C%E9%95%BF%E5%BA%A6%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C/">C语言位移、不同长度赋值操作</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="移位问题"><a href="#移位问题" class="headerlink" title="移位问题"></a>移位问题</h2><p>向下函数传入0x00800000和0x00400000分别返回什么？</p>
<p><img src="http://qiniu.laevatein.tech/202110152251595.png"></p>
<p>这还用想，当然返回原值了。然而实际却是返回了0xff800000和0x00400000</p>
<p>为什么0x00800000会返回0xff800000，而0x00400000返回了原值？</p>
<p>先看程序运行过程，首先temp先左移了八位，变成0x80000000，这是没有问题的，再右移八位后却变成了0xff800000。这是因为c语言对无符号类型数据的移位均为空位补零，但是对于有符号类型的右移却根据最高位决定，最高位为1则补1，反之则补零，所以0x00800000变换为0xff800000，而0x00400000返回原数值，但将数据类型改为无符号时则无此规律。</p>
<h2 id="不同类型赋值问题"><a href="#不同类型赋值问题" class="headerlink" title="不同类型赋值问题"></a>不同类型赋值问题</h2><p>已知cannle为u32，p_Temp为s32 分析下列赋值过程</p>
<p><img src="http://qiniu.laevatein.tech/202110152252589.png"></p>
<p>首先u32和s32长度等长，区别在于最高位是否有符号位，这种赋值二进制数值不变，但是在打印时候按不同类型解析。</p>
<p>其次，将长值赋值给短值，截取低位，然后再赋给短值（即丢弃长值中高于短值最高位的所有值）</p>
<p>其实上述过程只是将int 32类型拆分开存储。发送给上位机后，上位机可将其视为一个int32数据。</p>
<h2 id="赋值类型补充"><a href="#赋值类型补充" class="headerlink" title="赋值类型补充"></a>赋值类型补充</h2><table>
<thead>
<tr>
<th>整数与整数之间</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>短值赋给长值</td>
<td>短整数直接高位补0</td>
</tr>
<tr>
<td>两个无符号数据</td>
<td>短整数符号拓展</td>
</tr>
<tr>
<td>两个有符号类型</td>
<td></td>
</tr>
<tr>
<td>一个有符号，一个无符号</td>
<td>短整数先进行位数拓展，过程保持数为不变，然后按长整数的数据类型解析数据</td>
</tr>
</tbody></table>
<h3 id="整数与浮点数之间"><a href="#整数与浮点数之间" class="headerlink" title="整数与浮点数之间"></a>整数与浮点数之间</h3><p>浮点数转整型</p>
<p>截取整数部分</p>
<p>整型转浮点型</p>
<p>小数部分为零，整数部分不变</p>
<p>double &amp; float</p>
<p>double-&gt;float</p>
<p>丢失数据精度</p>
<p>float-&gt;double</p>
<p>不丢失精度</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://laevatein.tech/2020/10/04/c%E8%AF%AD%E8%A8%80%E4%BD%8D%E7%A7%BB%E3%80%81%E4%B8%8D%E5%90%8C%E9%95%BF%E5%BA%A6%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C/" data-id="ckusjj4sh000724t9b1le80wz" data-title="C语言位移、不同长度赋值操作" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/New-World/">New World</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/raspberry/">raspberry</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/stm32/">stm32</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E5%AE%83%E5%8D%95%E7%89%87%E6%9C%BA/">其它单片机</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">踩坑记录</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/10/13/%E5%91%8A%E5%88%ABVM%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E4%BD%BF%E7%94%A8WSL%E5%AE%89%E8%A3%85%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%99%A8/">告别VM虚拟机，使用WSL安装交叉编译器</a>
          </li>
        
          <li>
            <a href="/2021/09/30/Makefile/">Makefile</a>
          </li>
        
          <li>
            <a href="/2021/09/22/%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8B%E5%B2%97%E5%86%8D%E5%B0%B1%E4%B8%9A-ZeroTier%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">树莓派下岗再就业-ZeroTier内网穿透</a>
          </li>
        
          <li>
            <a href="/2021/01/21/rts%E3%80%81dtr%E4%B8%8E%E4%B8%80%E9%94%AE%E4%B8%8B%E8%BD%BD%E7%94%B5%E8%B7%AF/">RTS、DTR与一键下载电路</a>
          </li>
        
          <li>
            <a href="/2021/01/21/%E7%BB%99%E6%A0%91%E8%8E%93%E6%B4%BE%E6%B7%BB%E5%8A%A0%E7%89%A9%E7%90%86%E5%BC%80%E5%85%B3%E6%9C%BA%E6%8C%89%E9%94%AE/">给树莓派添加物理开关机按键</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 HelsingenMersken<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>